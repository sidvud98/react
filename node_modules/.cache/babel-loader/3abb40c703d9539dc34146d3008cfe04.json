{"ast":null,"code":"import _slicedToArray from \"/Users/siddharthvudikavalasa/final/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/siddharthvudikavalasa/final/react/src/Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport \"./Register.css\";\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logout, selectUser } from \"./features/userSlice\";\nimport { login } from \"./features/userSlice\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction Login() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      useremail = _useState2[0],\n      setemail = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userpassword = _useState4[0],\n      setpassword = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      load = _useState6[0],\n      setload = _useState6[1];\n\n  var user = useSelector(selectUser);\n  var dispatch = useDispatch();\n  var navigate = useNavigate();\n  useEffect(function () {\n    console.log(user);\n\n    if (user && user.loggedIn) {\n      navigate('/dashboard');\n      console.log(user, user.loggedIn);\n    }\n  }, []);\n\n  function clickfn(e) {\n    e.preventDefault();\n    setload(true);\n    axios.post('http://localhost:8000/api/users/login', {\n      email: useremail,\n      password: userpassword\n    }).then(function (response) {\n      setload(false);\n      dispatch(login({\n        userid: response.data.user.id,\n        name: response.data.user.name,\n        email: useremail,\n        password: userpassword,\n        loggedIn: true,\n        emailverification: true,\n        email_verified_at: response.data.user.email_verified_at,\n        role: response.data.user.role,\n        verifytoken: response.data.access_token\n      }));\n\n      if (response.data.user.email_verified_at !== null) {\n        navigate('/dashboard');\n      } else {\n        navigate('/emailverification');\n      }\n\n      ;\n    }).catch(function (error) {\n      setload(false);\n\n      if (error.response) {\n        if (error.response.data.error == 'Unauthorized') alert(\"Invalid Email or Password\");\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      } else if (error.request) {\n        console.log(error.request);\n      } else {\n        console.log('Error', error.message);\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, load ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 10\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRBNQyPCkUD1v_O6MJqR6i3MeDv5RBBIrsMQg&usqp=CAU\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: clickfn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 20\n    }\n  }, \"Email Address\")), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      e.preventDefault();\n      var userEmail = e.target.value;\n      setemail(userEmail);\n    },\n    type: \"text\",\n    placeholder: \"Enter your email\",\n    value: useremail,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 20\n    }\n  }, \"Password\")), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      e.preventDefault();\n      var userPassword = e.target.value;\n      setpassword(userPassword);\n    },\n    type: \"password\",\n    placeholder: \"Enter your Password\",\n    value: userpassword,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \"Forgot Password ? Click \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/requestpasswordreset\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 36\n    }\n  }, \"here\"))));\n}\n\nexport default Login;","map":{"version":3,"names":["React","Component","Link","useEffect","useState","axios","useDispatch","useSelector","logout","selectUser","login","useNavigate","Login","useremail","setemail","userpassword","setpassword","load","setload","user","dispatch","navigate","console","log","loggedIn","clickfn","e","preventDefault","post","email","password","then","response","userid","data","id","name","emailverification","email_verified_at","role","verifytoken","access_token","catch","error","alert","status","headers","request","message","userEmail","target","value","userPassword"],"sources":["/Users/siddharthvudikavalasa/final/react/src/Login.js"],"sourcesContent":["import React, { Component }  from 'react';\nimport {Link} from 'react-router-dom';\nimport \"./Register.css\";\nimport {useEffect, useState} from 'react';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logout, selectUser } from \"./features/userSlice\";\nimport {login} from \"./features/userSlice\";\nimport { useNavigate } from \"react-router-dom\";\nfunction Login() {\n    const [useremail,setemail]=useState('')\n    const [userpassword,setpassword]=useState('');\n    const [load, setload] = useState(false);\n    const user=useSelector(selectUser);\n    const dispatch=useDispatch();\n    let navigate = useNavigate();\n    useEffect(()=>{\n        console.log(user);\n        if(user && user.loggedIn){\n            navigate('/dashboard');\n            console.log(user,user.loggedIn);\n        }\n    },[])\n    function  clickfn(e){       \n   \n            e.preventDefault();\n            setload(true);\n         axios.post('http://localhost:8000/api/users/login',{\n             email:useremail,\n             password:userpassword,\n            })\n            .then(function (response) {\n                setload(false);\n             dispatch(login({\n                userid:response.data.user.id,\n                name:response.data.user.name,\n                email:useremail,\n                password:userpassword,\n                loggedIn:true,\n                emailverification:true,\n                email_verified_at:response.data.user.email_verified_at,\n                role:response.data.user.role,\n                verifytoken:response.data.access_token,\n            }))      \n        if(response.data.user.email_verified_at!==null){navigate('/dashboard')}\n        else{navigate('/emailverification')};       \n      })\n      .catch((error) => {\n        setload(false);\n        if (error.response) {\n            if(error.response.data.error=='Unauthorized') alert(\"Invalid Email or Password\");\n            console.log(error.response.status);\n            console.log(error.response.headers);\n        } else if (error.request) {\n            console.log(error.request);\n        } else {\n            console.log('Error', error.message);\n        }\n        \n    });\n    \n    }\n    return (\n        <div className=\"container\">\n      {load ? (\n        <div className=\"loader-container\">\n      \t  <div className=\"spinner\"></div>\n        </div>\n      ) : (\n    <div>\n        <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRBNQyPCkUD1v_O6MJqR6i3MeDv5RBBIrsMQg&usqp=CAU\" />\n        <form onSubmit={clickfn}>\n            <label><b>Email Address</b></label>\n            <input onChange={(e)=>{e.preventDefault();const userEmail=e.target.value; setemail(userEmail);}} type=\"text\" placeholder=\"Enter your email\" value={useremail} required/>\n            <br/>\n            <label><b>Password</b></label>\n            <input onChange={(e)=>{e.preventDefault();const userPassword=e.target.value;setpassword(userPassword);}} type=\"password\" placeholder=\"Enter your Password\" value={userpassword} required/>\n            <button type=\"submit\">Login</button>\n        </form>\n        \n        <p>Forgot Password ? Click <Link to=\"/requestpasswordreset\" >here</Link></p>      \n    </div>\n    )}\n    </div> \n    )\n}\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}