{"ast":null,"code":"import axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nconst api_url = \"http://localhost:8000/api/\";\nexport default new class AuthService {\n  async isAdmin() {\n    // var config = {\n    //     method: 'post',\n    //     url: '127.0.0.1:8000/api/me',\n    //     headers: { \n    //       'Authorization': 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9sb2NhbGhvc3Q6ODAwMFwvYXBpXC9sb2dpbiIsImlhdCI6MTY2MTI1NzI5NiwiZXhwIjoxNjYxMjYwODk2LCJuYmYiOjE2NjEyNTcyOTYsImp0aSI6Ikc3a1RXd0xzNndXQ1NWM1kiLCJzdWIiOjEsInBydiI6IjIzYmQ1Yzg5NDlmNjAwYWRiMzllNzAxYzQwMDg3MmRiN2E1OTc2ZjcifQ.M09W0MplrLiAR60PKwMTWsL9giGRAgCwOzHueZ6eVHI', \n    //     },\n    //   };\n    //   console.log(axios(config));\n    // console.log(\"hello\");\n    let token = JSON.parse(localStorage.getItem(\"user\")).access_token;\n    let data = null;\n    let config = {\n      params: {\n        email: \"bob\"\n      },\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    };\n\n    try {\n      const res = await axios.post(api_url + \"test\", data, config);\n      console.log(res);\n      return res;\n    } catch (err) {\n      console.log(err);\n      console.log(err);\n    }\n  }\n\n  async login(event) {\n    let e = event.target[0].value;\n    let p = event.target[1].value;\n    let data = null;\n    let config = {\n      params: {\n        email: e,\n        password: p\n      }\n    };\n\n    try {\n      const res = await axios.post(api_url + \"login\", data, config);\n\n      if (res.data.access_token) {\n        localStorage.setItem(\"user\", JSON.stringify(res.data));\n      }\n\n      return res;\n    } catch (err) {\n      console.log(\"gggg\");\n      console.log(err);\n    }\n  }\n\n  logout() {\n    localStorage.removeItem(\"user\");\n  }\n\n  async register(event) {\n    let u = event.target[0].value;\n    let e = event.target[1].value;\n    let p = event.target[2].value;\n\n    try {\n      const res = await axios.post(api_url + \"users\", null, {\n        params: {\n          name: u,\n          email: e,\n          password: p\n        }\n      });\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n}();","map":{"version":3,"names":["axios","useNavigate","api_url","AuthService","isAdmin","token","JSON","parse","localStorage","getItem","access_token","data","config","params","email","headers","Authorization","res","post","console","log","err","login","event","e","target","value","p","password","setItem","stringify","logout","removeItem","register","u","name"],"sources":["/Users/siddharthvudikavalasa/reactdemo/src/services/authenticate.js"],"sourcesContent":["import axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst api_url = \"http://localhost:8000/api/\";\n\nexport default new (class AuthService {\n  async isAdmin() {\n\n    // var config = {\n    //     method: 'post',\n    //     url: '127.0.0.1:8000/api/me',\n    //     headers: { \n    //       'Authorization': 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9sb2NhbGhvc3Q6ODAwMFwvYXBpXC9sb2dpbiIsImlhdCI6MTY2MTI1NzI5NiwiZXhwIjoxNjYxMjYwODk2LCJuYmYiOjE2NjEyNTcyOTYsImp0aSI6Ikc3a1RXd0xzNndXQ1NWM1kiLCJzdWIiOjEsInBydiI6IjIzYmQ1Yzg5NDlmNjAwYWRiMzllNzAxYzQwMDg3MmRiN2E1OTc2ZjcifQ.M09W0MplrLiAR60PKwMTWsL9giGRAgCwOzHueZ6eVHI', \n    //     },\n\n    //   };\n    //   console.log(axios(config));\n\n    // console.log(\"hello\");\n    let token = JSON.parse(localStorage.getItem(\"user\")).access_token;\n\n\n    let data = null;\n    let config = {\n      params: {\n        email:\"bob\",\n      },\n      headers:{\n        Authorization: 'Bearer '+token,\n      }\n    }\n    try {\n      const res = await axios.post(api_url + \"test\",data,config)\n      console.log(res);\n      return res;\n    } catch (err) {\n      console.log(err);\n\n      console.log(err);\n    }\n  }\n\n  async login(event) {\n    let e = event.target[0].value;\n    let p = event.target[1].value;\n\n    let data = null;\n    let config = {\n      params: {\n        email: e,\n        password: p,\n      }\n    }\n    try {\n      const res = await axios.post(api_url + \"login\",data,config);\n      if (res.data.access_token) {\n        localStorage.setItem(\"user\", JSON.stringify(res.data));\n      }\n      return res;\n    } catch (err) {\n      console.log(\"gggg\");\n\n      console.log(err);\n    }\n  }\n\n  logout() {\n    localStorage.removeItem(\"user\");\n  }\n\n  async register(event) {\n    let u = event.target[0].value;\n    let e = event.target[1].value;\n    let p = event.target[2].value;\n\n    try {\n      const res = await axios.post(api_url + \"users\", null, {\n        params: {\n          name: u,\n          email: e,\n          password: p,\n        },\n      });\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n})();\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,MAAMC,OAAO,GAAG,4BAAhB;AAEA,eAAe,IAAK,MAAMC,WAAN,CAAkB;EACvB,MAAPC,OAAO,GAAG;IAEd;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IAEA;IACA,IAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,EAAyCC,YAArD;IAGA,IAAIC,IAAI,GAAG,IAAX;IACA,IAAIC,MAAM,GAAG;MACXC,MAAM,EAAE;QACNC,KAAK,EAAC;MADA,CADG;MAIXC,OAAO,EAAC;QACNC,aAAa,EAAE,YAAUX;MADnB;IAJG,CAAb;;IAQA,IAAI;MACF,MAAMY,GAAG,GAAG,MAAMjB,KAAK,CAACkB,IAAN,CAAWhB,OAAO,GAAG,MAArB,EAA4BS,IAA5B,EAAiCC,MAAjC,CAAlB;MACAO,OAAO,CAACC,GAAR,CAAYH,GAAZ;MACA,OAAOA,GAAP;IACD,CAJD,CAIE,OAAOI,GAAP,EAAY;MACZF,OAAO,CAACC,GAAR,CAAYC,GAAZ;MAEAF,OAAO,CAACC,GAAR,CAAYC,GAAZ;IACD;EACF;;EAEU,MAALC,KAAK,CAACC,KAAD,EAAQ;IACjB,IAAIC,CAAC,GAAGD,KAAK,CAACE,MAAN,CAAa,CAAb,EAAgBC,KAAxB;IACA,IAAIC,CAAC,GAAGJ,KAAK,CAACE,MAAN,CAAa,CAAb,EAAgBC,KAAxB;IAEA,IAAIf,IAAI,GAAG,IAAX;IACA,IAAIC,MAAM,GAAG;MACXC,MAAM,EAAE;QACNC,KAAK,EAAEU,CADD;QAENI,QAAQ,EAAED;MAFJ;IADG,CAAb;;IAMA,IAAI;MACF,MAAMV,GAAG,GAAG,MAAMjB,KAAK,CAACkB,IAAN,CAAWhB,OAAO,GAAG,OAArB,EAA6BS,IAA7B,EAAkCC,MAAlC,CAAlB;;MACA,IAAIK,GAAG,CAACN,IAAJ,CAASD,YAAb,EAA2B;QACzBF,YAAY,CAACqB,OAAb,CAAqB,MAArB,EAA6BvB,IAAI,CAACwB,SAAL,CAAeb,GAAG,CAACN,IAAnB,CAA7B;MACD;;MACD,OAAOM,GAAP;IACD,CAND,CAME,OAAOI,GAAP,EAAY;MACZF,OAAO,CAACC,GAAR,CAAY,MAAZ;MAEAD,OAAO,CAACC,GAAR,CAAYC,GAAZ;IACD;EACF;;EAEDU,MAAM,GAAG;IACPvB,YAAY,CAACwB,UAAb,CAAwB,MAAxB;EACD;;EAEa,MAARC,QAAQ,CAACV,KAAD,EAAQ;IACpB,IAAIW,CAAC,GAAGX,KAAK,CAACE,MAAN,CAAa,CAAb,EAAgBC,KAAxB;IACA,IAAIF,CAAC,GAAGD,KAAK,CAACE,MAAN,CAAa,CAAb,EAAgBC,KAAxB;IACA,IAAIC,CAAC,GAAGJ,KAAK,CAACE,MAAN,CAAa,CAAb,EAAgBC,KAAxB;;IAEA,IAAI;MACF,MAAMT,GAAG,GAAG,MAAMjB,KAAK,CAACkB,IAAN,CAAWhB,OAAO,GAAG,OAArB,EAA8B,IAA9B,EAAoC;QACpDW,MAAM,EAAE;UACNsB,IAAI,EAAED,CADA;UAENpB,KAAK,EAAEU,CAFD;UAGNI,QAAQ,EAAED;QAHJ;MAD4C,CAApC,CAAlB;MAOA,OAAOV,GAAP;IACD,CATD,CASE,OAAOI,GAAP,EAAY;MACZF,OAAO,CAACC,GAAR,CAAYC,GAAZ;IACD;EACF;;AAlFmC,CAAvB,EAAf"},"metadata":{},"sourceType":"module"}