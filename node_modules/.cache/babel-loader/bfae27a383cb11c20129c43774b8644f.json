{"ast":null,"code":"import _slicedToArray from \"/Users/siddharthvudikavalasa/final/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/siddharthvudikavalasa/final/react/src/ChangePassword.js\";\nimport \"./Register.css\";\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate, useNavigate } from \"react-router-dom\";\nimport { selectUser } from \"./features/userSlice\";\n\nfunction ChangePassword() {\n  var navigate = useNavigate();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      oldpassword = _useState2[0],\n      setoldpasword = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newpassword = _useState4[0],\n      setnewpasword = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      newwpassword = _useState6[0],\n      setnewwpassword = _useState6[1];\n\n  var user = useSelector(selectUser);\n\n  function clickfn(e) {\n    e.preventDefault();\n\n    if (oldpassword === newpassword) {\n      alert('Your new password should be different from old password');\n    } else if (newwpassword !== newpassword) {\n      alert(\"New Passwords should match\");\n    } else {\n      axios.post('http://localhost:8000/password/change', {\n        password: oldpassword,\n        new_password: newpassword\n      }, {\n        headers: {\n          'Authorization': \"Bearer\" + user.verifytoken\n        }\n      }).then(function (response) {\n        if (response.data[0] === 'Your password has been successfully changed') {\n          alert(\"Your password has been successfully changed. Login with the new password\");\n          navigate('/login');\n        }\n      }).catch(function (error) {\n        if (error.response) {\n          if (error.response.data[0] === 'Incorrect current password') {\n            alert(\"Old Password is incorrect\");\n          }\n\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          console.log(error.request);\n        } else {\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n      });\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, \"Change Password\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: clickfn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      e.preventDefault();\n      var oldPassword = e.target.value;\n      setoldpasword(oldPassword);\n    },\n    type: \"password\",\n    placeholder: \"Current Password\",\n    value: oldpassword,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      e.preventDefault();\n      var newPassword = e.target.value;\n      setnewpasword(newPassword);\n    },\n    type: \"password\",\n    placeholder: \"New Password\",\n    value: newpassword,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"Re-enter your new password\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      e.preventDefault();\n      var newwPassword = e.target.value;\n      setnewwpassword(newwPassword);\n    },\n    type: \"password\",\n    placeholder: \"New Password\",\n    value: newwpassword,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, \"Change\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return navigate('/dashboard');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \"Cancel\")));\n}\n\nexport default ChangePassword;","map":{"version":3,"names":["useState","axios","useDispatch","useSelector","Navigate","useNavigate","selectUser","ChangePassword","navigate","oldpassword","setoldpasword","newpassword","setnewpasword","newwpassword","setnewwpassword","user","clickfn","e","preventDefault","alert","post","password","new_password","headers","verifytoken","then","response","data","catch","error","console","log","status","request","message","config","oldPassword","target","value","newPassword","newwPassword"],"sources":["/Users/siddharthvudikavalasa/final/react/src/ChangePassword.js"],"sourcesContent":["import \"./Register.css\";\nimport {useState} from 'react';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate, useNavigate } from \"react-router-dom\";\nimport { selectUser } from \"./features/userSlice\";\n\nfunction ChangePassword() {\n\n    let navigate = useNavigate();\n    const [oldpassword,setoldpasword]=useState('');\n    const [newpassword,setnewpasword]=useState('');\n    const [newwpassword,setnewwpassword]=useState('');\n    const user = useSelector(selectUser);\n    function clickfn(e){\n        e.preventDefault();\n        if(oldpassword===newpassword){alert('Your new password should be different from old password');}\n        else if(newwpassword!==newpassword) {alert(\"New Passwords should match\");}\n        else{\n            axios.post('http://localhost:8000/password/change',{\n                password:oldpassword,\n                new_password:newpassword\n            },{headers:\n                {\n                    'Authorization':\"Bearer\"+ user.verifytoken\n                }})\n            .then(function (response){\n                if(response.data[0]==='Your password has been successfully changed'){\n                    alert(\"Your password has been successfully changed. Login with the new password\");\n                    navigate('/login');\n                }\n            })\n            .catch((error) => {\n                if (error.response) {\n                    if(error.response.data[0]==='Incorrect current password'){\n                        alert(\"Old Password is incorrect\");\n                    }\n                    console.log(error.response.status);\n                    console.log(error.response.headers);\n                } else if (error.request) {\n                    console.log(error.request);\n                } else {\n                    console.log('Error', error.message);\n                }\n                console.log(error.config);\n            });\n        }\n    }\n    return (<div>\n        <h1>Change Password</h1>\n        <form onSubmit={clickfn }>\n        <input onChange={(e)=>{e.preventDefault();const oldPassword=e.target.value;setoldpasword(oldPassword);}} type=\"password\" placeholder=\"Current Password\" value={oldpassword} required></input>\n        <input onChange={(e)=>{e.preventDefault();const newPassword=e.target.value;setnewpasword(newPassword);}} type=\"password\" placeholder=\"New Password\" value={newpassword} required></input>\n        <label>Re-enter your new password</label>\n        <input onChange={(e)=>{e.preventDefault();const newwPassword=e.target.value;setnewwpassword(newwPassword);}} type=\"password\" placeholder=\"New Password\" value={newwpassword} required></input>\n        <button type=\"submit\">Change</button>\n        <button onClick={()=>navigate('/dashboard')} >Cancel</button>\n        </form>\n        \n         </div>\n    )\n}\nexport default ChangePassword"],"mappings":"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"},"metadata":{},"sourceType":"module"}